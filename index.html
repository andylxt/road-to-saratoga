<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Road to Saratoga</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <noscript><p style="text-align:center;padding:2rem;font-family:sans-serif;">Please enable JavaScript to experience The Road to Saratoga interactive app.</p></noscript>
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CSS CUSTOM PROPERTIES (Design System)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
      --bg-cream: #FFF8F0;
      --bg-white: #FFFFFF;
      --blue: #1D4ED8;
      --blue-light: #DBEAFE;
      --blue-dark: #1e40af;
      --red: #DC2626;
      --red-light: #FEE2E2;
      --green: #16A34A;
      --green-light: #DCFCE7;
      --gold: #F59E0B;
      --gold-light: #F5E6CC;
      --charcoal: #1F2937;
      --slate: #64748B;
      --border: #E5E7EB;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 25px -3px rgba(0,0,0,0.12), 0 4px 10px -4px rgba(0,0,0,0.08);
      --radius: 16px;
      --radius-sm: 8px;
      --radius-pill: 9999px;
      --nav-height-top: 64px;
      --nav-height-bottom: 72px;
      --max-width: 1200px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESET & BASE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; font-size: 16px; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-cream);
      color: var(--charcoal);
      line-height: 1.6;
      overflow-x: hidden;
    }
    body.top-nav-active { padding-top: var(--nav-height-top); }
    img, svg { display: block; max-width: 100%; }
    button { cursor: pointer; border: none; background: none; font-family: inherit; }
    a { color: inherit; text-decoration: none; }
    ul { list-style: none; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TYPOGRAPHY
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    h1 { font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 900; letter-spacing: -0.03em; line-height: 1.1; }
    h2 { font-size: clamp(1.5rem, 3vw, 2.5rem); font-weight: 800; letter-spacing: -0.025em; line-height: 1.2; }
    h3 { font-size: clamp(1.1rem, 2vw, 1.5rem); font-weight: 700; letter-spacing: -0.015em; }
    h4 { font-size: 1rem; font-weight: 700; }
    p { font-size: 1rem; line-height: 1.65; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NAVIGATION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #main-nav {
      position: fixed;
      z-index: 1000;
      background: rgba(255,248,240,0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      transition: transform 0.3s ease;
    }

    /* Top nav (tablet+) */
    @media (min-width: 640px) {
      #main-nav {
        top: 0; left: 0; right: 0;
        height: var(--nav-height-top);
        display: flex;
        align-items: center;
        padding: 0 2rem;
      }
      .nav-inner {
        width: 100%; max-width: var(--max-width);
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
      }
      .nav-brand {
        font-size: 1.1rem;
        font-weight: 800;
        color: var(--charcoal);
        letter-spacing: -0.02em;
        white-space: nowrap;
      }
      .nav-brand span { color: var(--blue); }
      .nav-tabs {
        display: flex;
        gap: 0.25rem;
        align-items: center;
      }
      .nav-tab {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.5rem 0.875rem;
        border-radius: var(--radius-pill);
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--slate);
        transition: background 0.2s, color 0.2s;
        cursor: pointer;
        white-space: nowrap;
        border: none;
        background: none;
        font-family: inherit;
      }
      .nav-tab:hover { background: var(--gold-light); color: var(--charcoal); }
      .nav-tab.active { background: var(--blue); color: white; }
      .nav-tab .tab-icon { font-size: 1rem; }
    }

    /* Bottom nav (mobile) */
    @media (max-width: 639px) {
      #main-nav {
        bottom: 0; left: 0; right: 0;
        height: var(--nav-height-bottom);
        display: flex;
        align-items: flex-start;
        padding-top: 0.5rem;
        border-top: 1px solid var(--border);
        border-bottom: none;
      }
      .nav-inner {
        width: 100%;
        display: flex;
        align-items: flex-start;
        justify-content: space-around;
      }
      .nav-brand { display: none; }
      .nav-tab {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.2rem;
        padding: 0.25rem 0.5rem;
        border-radius: var(--radius-sm);
        font-size: 0.65rem;
        font-weight: 600;
        color: var(--slate);
        transition: color 0.2s;
        cursor: pointer;
        border: none;
        background: none;
        font-family: inherit;
        min-width: 44px;
        min-height: 44px;
      }
      .nav-tab .tab-icon { font-size: 1.4rem; }
      .nav-tab.active { color: var(--blue); }
      .nav-tab .tab-label { line-height: 1; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION LAYOUT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .section {
      display: none;
      min-height: 100vh;
      padding: 3rem 1.5rem 6rem;
    }
    @media (min-width: 640px) {
      .section { padding: 4rem 2rem 4rem; }
    }
    .section.active { display: block; }
    .section-inner {
      max-width: var(--max-width);
      margin: 0 auto;
    }

    /* Add bottom padding on mobile for nav */
    @media (max-width: 639px) {
      .section { padding-bottom: calc(var(--nav-height-bottom) + 2rem); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION HEADERS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }
    .section-header .badge {
      display: inline-block;
      background: var(--gold-light);
      color: var(--charcoal);
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 0.3rem 0.9rem;
      border-radius: var(--radius-pill);
      margin-bottom: 0.75rem;
    }
    .section-header p {
      color: var(--slate);
      max-width: 600px;
      margin: 0.75rem auto 0;
      font-size: 1.05rem;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOME SECTION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #section-home {
      padding: 0;
      min-height: 100vh;
    }
    .hero {
      background: linear-gradient(155deg, var(--bg-cream) 0%, #F5E6CC 50%, #EDD9A3 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem 1.5rem 3rem;
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -20%;
      width: 60%;
      height: 120%;
      background: radial-gradient(ellipse, rgba(245,158,11,0.12) 0%, transparent 70%);
      pointer-events: none;
    }
    .hero::after {
      content: '';
      position: absolute;
      bottom: -30%;
      right: -10%;
      width: 50%;
      height: 80%;
      background: radial-gradient(ellipse, rgba(29,78,216,0.07) 0%, transparent 70%);
      pointer-events: none;
    }
    .hero-eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(245,158,11,0.3);
      border-radius: var(--radius-pill);
      padding: 0.4rem 1rem;
      font-size: 0.8rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--slate);
      margin-bottom: 1.25rem;
      animation: fadeSlideUp 0.6s ease forwards;
      opacity: 0;
    }
    .hero-title {
      color: var(--charcoal);
      margin-bottom: 1.25rem;
      position: relative;
      animation: fadeSlideUp 0.7s 0.1s ease forwards;
      opacity: 0;
    }
    .hero-title .title-line1 { display: block; }
    .hero-title .title-highlight {
      color: var(--blue);
      position: relative;
    }
    .hero-title .title-highlight::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gold);
      border-radius: 2px;
      animation: expandWidth 0.8s 0.8s ease forwards;
      transform-origin: left;
      transform: scaleX(0);
    }
    .hero-tagline {
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      color: var(--slate);
      max-width: 580px;
      margin: 0 auto 2.25rem;
      font-weight: 400;
      animation: fadeSlideUp 0.7s 0.2s ease forwards;
      opacity: 0;
    }
    .hero-cta {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--blue);
      color: white;
      font-size: 1.05rem;
      font-weight: 700;
      padding: 0.875rem 2rem;
      border-radius: var(--radius-pill);
      border: none;
      cursor: pointer;
      font-family: inherit;
      box-shadow: 0 4px 20px rgba(29,78,216,0.35);
      transition: transform 0.2s, box-shadow 0.2s;
      animation: fadeSlideUp 0.7s 0.35s ease forwards;
      opacity: 0;
    }
    .hero-cta:hover { transform: scale(1.03); box-shadow: 0 6px 28px rgba(29,78,216,0.45); }
    .hero-cta:active { transform: scale(0.98); }

    .hero-scroll-hint {
      position: absolute;
      bottom: 1.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      color: var(--slate);
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.3rem;
      animation: fadeIn 1s 1.2s ease forwards;
      opacity: 0;
    }
    .scroll-arrow {
      width: 20px;
      height: 20px;
      border-right: 2px solid var(--slate);
      border-bottom: 2px solid var(--slate);
      transform: rotate(45deg);
      animation: bounceDown 1.5s infinite ease-in-out;
    }

    .fast-facts {
      background: var(--bg-white);
      padding: 3rem 1.5rem;
    }
    @media (min-width: 640px) {
      .fast-facts { padding: 3.5rem 2rem; }
    }
    .fast-facts-inner {
      max-width: var(--max-width);
      margin: 0 auto;
    }
    .fast-facts h2 {
      text-align: center;
      margin-bottom: 2rem;
    }
    .fast-facts-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
    }
    @media (min-width: 640px) {
      .fast-facts-grid { grid-template-columns: repeat(3, 1fr); }
    }
    .fact-card {
      background: var(--bg-cream);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.75rem 1.5rem;
      text-align: center;
      box-shadow: var(--shadow-sm);
      opacity: 0;
      transform: translateY(24px);
      transition: transform 0.35s ease, box-shadow 0.25s ease;
    }
    .fact-card.animate-in {
      opacity: 1;
      transform: translateY(0);
    }
    .fact-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
    .fact-card .fact-icon { font-size: 2.25rem; margin-bottom: 0.75rem; }
    .fact-card .fact-label { font-size: 0.75rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; color: var(--slate); margin-bottom: 0.4rem; }
    .fact-card .fact-value { font-size: 1.15rem; font-weight: 800; color: var(--charcoal); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STORY â€” TIMELINE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .timeline {
      position: relative;
      padding: 2rem 0;
    }
    .timeline::before {
      content: '';
      position: absolute;
      left: 50%;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(to bottom, var(--gold-light), var(--gold), var(--gold-light));
      transform: translateX(-50%);
      border-radius: 2px;
    }
    @media (max-width: 767px) {
      .timeline::before { left: 28px; transform: none; }
    }
    .timeline-node {
      display: flex;
      align-items: flex-start;
      gap: 2rem;
      margin-bottom: 3.5rem;
      position: relative;
      opacity: 0;
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .timeline-node:nth-child(odd) { transform: translateX(-40px); }
    .timeline-node:nth-child(even) { transform: translateX(40px); }
    .timeline-node.animate-in { opacity: 1; transform: translateX(0); }

    @media (min-width: 768px) {
      .timeline-node { width: 50%; }
      .timeline-node:nth-child(odd) {
        margin-left: 0;
        padding-right: 3.5rem;
        flex-direction: row-reverse;
        text-align: right;
      }
      .timeline-node:nth-child(even) {
        margin-left: 50%;
        padding-left: 3.5rem;
      }
    }

    @media (max-width: 767px) {
      .timeline-node {
        padding-left: 68px;
        flex-direction: column;
        gap: 0.5rem;
      }
      .timeline-node:nth-child(odd) { transform: translateX(-20px); }
      .timeline-node:nth-child(even) { transform: translateX(-20px); }
    }

    .timeline-dot {
      position: absolute;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--gold);
      border: 3px solid var(--bg-white);
      box-shadow: 0 0 0 3px var(--gold);
      top: 4px;
      flex-shrink: 0;
    }
    @media (min-width: 768px) {
      .timeline-node:nth-child(odd) .timeline-dot {
        right: -9px;
        left: auto;
      }
      .timeline-node:nth-child(even) .timeline-dot {
        left: -9px;
      }
    }
    @media (max-width: 767px) {
      .timeline-dot { left: 19px; }
    }

    .timeline-card {
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      flex: 1;
      transition: box-shadow 0.25s ease;
    }
    .timeline-card:hover { box-shadow: var(--shadow-lg); }

    .timeline-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: var(--gold-light);
      color: #92400E;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      padding: 0.25rem 0.7rem;
      border-radius: var(--radius-pill);
      margin-bottom: 0.6rem;
    }
    .timeline-icon { font-size: 2rem; margin-bottom: 0.5rem; }
    .timeline-card h3 { margin-bottom: 0.5rem; color: var(--charcoal); }
    .timeline-card p { color: var(--slate); font-size: 0.95rem; }

    /* Battle event color accents */
    .timeline-card.battle { border-left: 4px solid var(--red); }
    .timeline-card.american { border-left: 4px solid var(--blue); }
    .timeline-card.british { border-left: 4px solid var(--red); }
    .timeline-card.stalemate { border-left: 4px solid var(--gold); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PEOPLE â€” CHARACTER CARDS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .people-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    @media (min-width: 600px) { .people-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 960px) { .people-grid { grid-template-columns: repeat(3, 1fr); } }

    .person-card {
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.75rem 1.5rem;
      box-shadow: var(--shadow-md);
      opacity: 0;
      transform: translateY(24px);
      transition: transform 0.35s ease, box-shadow 0.25s ease, opacity 0.5s ease;
      display: flex;
      flex-direction: column;
    }
    .person-card.animate-in { opacity: 1; transform: translateY(0); }
    .person-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-lg); }

    .person-avatar-wrap {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    .person-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      border: 3px solid transparent;
      overflow: hidden;
    }
    .person-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }
    .person-avatar.american { background: var(--blue-light); border-color: var(--blue); }
    .person-avatar.british { background: var(--red-light); border-color: var(--red); }

    .person-faction {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      padding: 0.2rem 0.6rem;
      border-radius: var(--radius-pill);
      margin-bottom: 0.35rem;
    }
    .person-faction.american { background: var(--blue-light); color: var(--blue-dark); }
    .person-faction.british { background: var(--red-light); color: #991B1B; }

    .person-name { font-size: 1.2rem; font-weight: 800; margin-bottom: 0.2rem; }
    .person-title { font-size: 0.85rem; color: var(--slate); font-weight: 500; margin-bottom: 0.75rem; }
    .person-bio { font-size: 0.92rem; color: var(--charcoal); line-height: 1.6; flex: 1; margin-bottom: 1rem; }

    .fun-fact-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      background: var(--bg-cream);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 0.6rem 0.875rem;
      font-size: 0.82rem;
      font-weight: 700;
      color: var(--charcoal);
      cursor: pointer;
      font-family: inherit;
      transition: background 0.2s;
    }
    .fun-fact-toggle:hover { background: var(--gold-light); }
    .fun-fact-toggle .toggle-arrow {
      font-size: 0.75rem;
      transition: transform 0.3s ease;
    }
    .fun-fact-toggle.open .toggle-arrow { transform: rotate(180deg); }

    .fun-fact-body {
      display: none;
      background: var(--gold-light);
      border: 1px solid rgba(245,158,11,0.3);
      border-radius: var(--radius-sm);
      padding: 0.75rem 0.875rem;
      font-size: 0.88rem;
      color: #78350F;
      line-height: 1.55;
      margin-top: 0.5rem;
      font-style: italic;
    }
    .fun-fact-body.open { display: block; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BATTLES â€” TABS + MAPS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .battle-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .battle-tab-btn {
      padding: 0.625rem 1.5rem;
      border-radius: var(--radius-pill);
      font-size: 0.9rem;
      font-weight: 700;
      border: 2px solid var(--border);
      color: var(--slate);
      background: var(--bg-white);
      cursor: pointer;
      font-family: inherit;
      transition: all 0.2s;
    }
    .battle-tab-btn:hover { border-color: var(--blue); color: var(--blue); }
    .battle-tab-btn.active { background: var(--blue); border-color: var(--blue); color: white; }
    .battle-tab-btn.compare { border-color: var(--gold); color: #92400E; }
    .battle-tab-btn.compare.active { background: var(--gold); border-color: var(--gold); color: white; }

    .battle-panel { display: none; }
    .battle-panel.active { display: block; }

    .battle-layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.75rem;
    }
    @media (min-width: 900px) {
      .battle-layout { grid-template-columns: 1fr 1fr; align-items: start; }
    }

    .battle-map-container {
      background: #e8f0e0;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem;
      box-shadow: var(--shadow-md);
    }
    .battle-map-container h4 {
      text-align: center;
      font-size: 0.8rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--slate);
      margin-bottom: 0.75rem;
    }
    .battle-map-container svg {
      width: 100%;
      height: auto;
      display: block;
    }

    .battle-info h3 { margin-bottom: 1rem; }
    .battle-stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }
    .stat-box {
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 0.875rem;
      text-align: center;
    }
    .stat-box .stat-label { font-size: 0.7rem; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; color: var(--slate); margin-bottom: 0.3rem; }
    .stat-box .stat-value { font-size: 1rem; font-weight: 800; color: var(--charcoal); }
    .stat-box.highlight .stat-value { color: var(--red); }

    .battle-bullets h4 { margin-bottom: 0.75rem; color: var(--charcoal); }
    .battle-bullets ul { display: flex; flex-direction: column; gap: 0.6rem; }
    .battle-bullets li {
      display: flex;
      align-items: flex-start;
      gap: 0.6rem;
      font-size: 0.92rem;
      line-height: 1.55;
      color: var(--charcoal);
    }
    .battle-bullets li::before {
      content: 'âš”ï¸';
      font-size: 0.85rem;
      flex-shrink: 0;
      margin-top: 1px;
    }

    /* Battle map legend */
    .map-legend {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-top: 0.75rem;
      justify-content: center;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.72rem;
      font-weight: 600;
      color: var(--slate);
    }
    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }
    .legend-dot.blue { background: #1D4ED8; }
    .legend-dot.red { background: #DC2626; }
    .legend-dot.green { background: #16A34A; }

    /* SVG Animated arrows */
    @keyframes dash {
      from { stroke-dashoffset: 200; }
      to { stroke-dashoffset: 0; }
    }
    .svg-arrow {
      stroke-dasharray: 200;
      stroke-dashoffset: 200;
      animation: dash 1.8s ease forwards;
    }
    .svg-arrow-2 {
      stroke-dasharray: 200;
      stroke-dashoffset: 200;
      animation: dash 1.8s 0.3s ease forwards;
    }
    .svg-arrow-3 {
      stroke-dasharray: 200;
      stroke-dashoffset: 200;
      animation: dash 1.8s 0.6s ease forwards;
    }

    /* Compare table */
    .compare-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      background: var(--bg-white);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }
    .compare-table th {
      padding: 0.875rem 1rem;
      text-align: left;
      font-weight: 700;
      font-size: 0.82rem;
      letter-spacing: 0.03em;
    }
    .compare-table th:first-child { background: var(--bg-cream); }
    .compare-table th:nth-child(2) { background: #DBEAFE; color: var(--blue); }
    .compare-table th:nth-child(3) { background: #FEE2E2; color: var(--red); }
    .compare-table td {
      padding: 0.75rem 1rem;
      border-top: 1px solid var(--border);
      line-height: 1.5;
    }
    .compare-table tr:nth-child(even) td { background: rgba(0,0,0,0.02); }
    .compare-table td:first-child { font-weight: 700; color: var(--slate); font-size: 0.8rem; letter-spacing: 0.04em; text-transform: uppercase; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       QUIZ
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .quiz-progress-wrap {
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: var(--shadow-sm);
    }
    .quiz-progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.6rem;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--slate);
    }
    .quiz-score-display {
      font-size: 1rem;
      font-weight: 800;
      color: var(--charcoal);
    }
    .progress-bar-track {
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
    }
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--blue), #3B82F6);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .quiz-card {
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: var(--shadow-md);
    }
    .quiz-q-number {
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--slate);
      margin-bottom: 0.75rem;
    }
    .quiz-question {
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--charcoal);
      margin-bottom: 1.5rem;
      line-height: 1.4;
    }
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      margin-bottom: 1.25rem;
    }
    .quiz-option {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1rem;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 500;
      transition: border-color 0.15s, background 0.15s;
      background: var(--bg-white);
      color: var(--charcoal);
    }
    .quiz-option:hover:not(.locked) { border-color: var(--blue); background: var(--blue-light); }
    .quiz-option.selected { border-color: var(--blue); background: var(--blue-light); color: var(--blue-dark); }
    .quiz-option.correct { border-color: var(--green); background: var(--green-light); color: #14532D; }
    .quiz-option.wrong { border-color: var(--red); background: var(--red-light); color: #991B1B; animation: shake 0.4s ease; }
    .quiz-option.locked { cursor: default; }
    .quiz-option-letter {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      flex-shrink: 0;
      transition: background 0.15s, color 0.15s;
    }
    .quiz-option.selected .quiz-option-letter { background: var(--blue); color: white; }
    .quiz-option.correct .quiz-option-letter { background: var(--green); color: white; }
    .quiz-option.wrong .quiz-option-letter { background: var(--red); color: white; }

    .quiz-submit-btn {
      background: var(--blue);
      color: white;
      font-size: 0.95rem;
      font-weight: 700;
      padding: 0.75rem 2rem;
      border-radius: var(--radius-pill);
      border: none;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.15s, box-shadow 0.15s;
      box-shadow: 0 3px 12px rgba(29,78,216,0.3);
    }
    .quiz-submit-btn:hover:not(:disabled) { transform: scale(1.02); box-shadow: 0 5px 16px rgba(29,78,216,0.4); }
    .quiz-submit-btn:active:not(:disabled) { transform: scale(0.98); }
    .quiz-submit-btn:disabled { opacity: 0.4; cursor: default; }

    .quiz-next-btn {
      background: var(--charcoal);
      color: white;
      font-size: 0.95rem;
      font-weight: 700;
      padding: 0.75rem 2rem;
      border-radius: var(--radius-pill);
      border: none;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.15s;
      margin-left: 0.75rem;
    }
    .quiz-next-btn:hover { transform: scale(1.02); }
    .quiz-next-btn:active { transform: scale(0.98); }

    .quiz-feedback {
      display: none;
      padding: 0.875rem 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 1rem;
      line-height: 1.5;
    }
    .quiz-feedback.correct { background: var(--green-light); color: #14532D; border: 1px solid #86EFAC; display: block; }
    .quiz-feedback.wrong { background: var(--red-light); color: #991B1B; border: 1px solid #FECACA; display: block; }

    /* Confetti */
    .confetti-container {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      overflow: hidden;
    }
    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 10px;
      top: -10px;
      border-radius: 2px;
      animation: confettiFall linear forwards;
    }
    @keyframes confettiFall {
      0% { transform: translateY(-10px) rotateZ(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
    }

    /* Quiz end screen */
    .quiz-end {
      display: none;
      text-align: center;
      padding: 3rem 1.5rem;
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
    }
    .quiz-end.visible { display: block; }
    .quiz-end-badge { font-size: 4rem; margin-bottom: 1rem; }
    .quiz-end-title { font-size: 1.75rem; font-weight: 900; color: var(--charcoal); margin-bottom: 0.5rem; }
    .quiz-end-subtitle { font-size: 1rem; color: var(--slate); margin-bottom: 0.5rem; }
    .quiz-end-score { font-size: 2.5rem; font-weight: 900; color: var(--blue); margin: 1rem 0; }
    .quiz-retake-btn {
      background: var(--blue);
      color: white;
      font-size: 1rem;
      font-weight: 700;
      padding: 0.875rem 2.5rem;
      border-radius: var(--radius-pill);
      border: none;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.15s;
      margin-top: 1rem;
    }
    .quiz-retake-btn:hover { transform: scale(1.03); }
    .quiz-retake-btn:active { transform: scale(0.98); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DRAG AND DROP TIMELINE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .dnd-instruction {
      text-align: center;
      color: var(--slate);
      font-size: 0.92rem;
      margin-bottom: 1.5rem;
    }
    .dnd-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    @media (min-width: 768px) {
      .dnd-container { grid-template-columns: 1fr 1fr; }
    }
    .dnd-panel {
      background: var(--bg-white);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem;
      box-shadow: var(--shadow-sm);
    }
    .dnd-panel h4 {
      font-size: 0.78rem;
      font-weight: 700;
      letter-spacing: 0.07em;
      text-transform: uppercase;
      color: var(--slate);
      margin-bottom: 1rem;
    }
    .dnd-items-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      min-height: 280px;
    }
    .dnd-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1rem;
      background: var(--bg-cream);
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: grab;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--charcoal);
      user-select: none;
      touch-action: none;
      transition: border-color 0.2s, box-shadow 0.2s, transform 0.2s;
    }
    .dnd-item:hover { border-color: var(--blue); box-shadow: var(--shadow-md); }
    .dnd-item.dragging { opacity: 0.5; cursor: grabbing; }
    .dnd-item.correct { border-color: var(--green); background: var(--green-light); color: #14532D; cursor: default; }
    .dnd-item.wrong-drop { animation: shake 0.4s ease; }

    .dnd-drop-zone {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      min-height: 280px;
    }
    .dnd-slot {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1rem;
      border: 2px dashed var(--border);
      border-radius: var(--radius-sm);
      min-height: 52px;
      font-size: 0.85rem;
      color: var(--slate);
      transition: border-color 0.2s, background 0.2s;
    }
    .dnd-slot.drag-over { border-color: var(--blue); background: var(--blue-light); }
    .dnd-slot.filled { border-style: solid; border-color: var(--green); background: var(--green-light); color: #14532D; font-weight: 600; }
    .dnd-slot.filled-wrong { border-style: solid; border-color: var(--red); background: var(--red-light); color: #991B1B; }
    .dnd-slot-number {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.72rem;
      font-weight: 800;
      flex-shrink: 0;
      color: var(--slate);
    }
    .dnd-slot.filled .dnd-slot-number { background: var(--green); color: white; }
    .dnd-slot.drag-over .dnd-slot-number { background: var(--blue); color: white; }

    .dnd-result {
      text-align: center;
      padding: 1.25rem;
      border-radius: var(--radius);
      margin-top: 1rem;
      display: none;
    }
    .dnd-result.show { display: block; }
    .dnd-result.success { background: var(--green-light); color: #14532D; border: 1px solid #86EFAC; }
    .dnd-result.error { background: var(--red-light); color: #991B1B; border: 1px solid #FECACA; }

    .dnd-check-btn {
      display: block;
      margin: 1rem auto 0;
      background: var(--blue);
      color: white;
      font-size: 0.95rem;
      font-weight: 700;
      padding: 0.75rem 2rem;
      border-radius: var(--radius-pill);
      border: none;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.15s;
    }
    .dnd-check-btn:hover { transform: scale(1.02); }
    .dnd-reset-btn {
      display: block;
      margin: 0.75rem auto 0;
      background: var(--bg-white);
      color: var(--slate);
      font-size: 0.85rem;
      font-weight: 600;
      padding: 0.5rem 1.5rem;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border);
      cursor: pointer;
      font-family: inherit;
    }
    .dnd-reset-btn:hover { background: var(--bg-cream); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FLASHCARDS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .flashcard-intro {
      text-align: center;
      color: var(--slate);
      font-size: 0.92rem;
      margin-bottom: 1.5rem;
    }
    .flashcard-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
    }
    @media (min-width: 600px) { .flashcard-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 900px) { .flashcard-grid { grid-template-columns: repeat(4, 1fr); } }

    .flashcard-wrap {
      perspective: 800px;
      height: 220px;
      cursor: pointer;
    }
    .flashcard-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s ease;
    }
    .flashcard-wrap.flipped .flashcard-inner { transform: rotateY(180deg); }

    .flashcard-front,
    .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: var(--radius);
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1.25rem;
      text-align: center;
      box-shadow: var(--shadow-md);
    }
    .flashcard-front {
      background: linear-gradient(135deg, var(--blue) 0%, #2563EB 100%);
      color: white;
    }
    .flashcard-back {
      background: linear-gradient(135deg, var(--gold) 0%, #D97706 100%);
      color: white;
      transform: rotateY(180deg);
    }
    .flashcard-front .card-icon { font-size: 1.75rem; margin-bottom: 0.6rem; }
    .flashcard-front .card-q { font-size: 0.9rem; font-weight: 700; line-height: 1.4; }
    .flashcard-back .card-a { font-size: 0.85rem; font-weight: 600; line-height: 1.5; }
    .flashcard-front .card-hint {
      font-size: 0.7rem;
      opacity: 0.75;
      margin-top: 0.75rem;
      letter-spacing: 0.04em;
      font-weight: 500;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       QUIZ ZONE SECTION LAYOUT (tabs)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .quiz-zone-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .qz-tab-btn {
      padding: 0.5rem 1.1rem;
      border-radius: var(--radius-pill);
      font-size: 0.875rem;
      font-weight: 700;
      border: 2px solid var(--border);
      color: var(--slate);
      background: var(--bg-white);
      cursor: pointer;
      font-family: inherit;
      transition: all 0.2s;
    }
    .qz-tab-btn:hover { border-color: var(--blue); color: var(--blue); }
    .qz-tab-btn.active { background: var(--blue); border-color: var(--blue); color: white; }

    .qz-panel { display: none; }
    .qz-panel.active { display: block; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SHARED ANIMATIONS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @keyframes fadeSlideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes expandWidth {
      from { transform: scaleX(0); }
      to { transform: scaleX(1); }
    }
    @keyframes bounceDown {
      0%, 100% { transform: rotate(45deg) translateY(0); }
      50% { transform: rotate(45deg) translateY(5px); }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }
    @keyframes snapIn {
      0% { transform: scale(1.05); }
      60% { transform: scale(0.97); }
      100% { transform: scale(1); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PREFERS REDUCED MOTION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      .hero-eyebrow, .hero-title, .hero-tagline, .hero-cta, .hero-scroll-hint { opacity: 1; transform: none; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    footer {
      background: var(--charcoal);
      color: rgba(255,255,255,0.6);
      text-align: center;
      padding: 2rem 1.5rem;
      font-size: 0.82rem;
      line-height: 1.7;
    }
    footer strong { color: white; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       UTILITY
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sr-only { position: absolute; width: 1px; height: 1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; }
    .text-blue { color: var(--blue); }
    .text-red { color: var(--red); }
    .text-gold { color: var(--gold); }
    .hidden { display: none !important; }

    /* Mobile bottom nav padding */
    @media (max-width: 639px) {
      body { padding-bottom: 0; }
    }
  </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav id="main-nav" role="navigation" aria-label="Main navigation">
  <div class="nav-inner">
    <div class="nav-brand">âš”ï¸ <span>Road to</span> Saratoga</div>
    <div class="nav-tabs" role="tablist">
      <button class="nav-tab active" data-section="home" role="tab" aria-selected="true" aria-controls="section-home">
        <span class="tab-icon" aria-hidden="true">ğŸ </span>
        <span class="tab-label">Home</span>
      </button>
      <button class="nav-tab" data-section="story" role="tab" aria-selected="false" aria-controls="section-story">
        <span class="tab-icon" aria-hidden="true">ğŸ“–</span>
        <span class="tab-label">Story</span>
      </button>
      <button class="nav-tab" data-section="people" role="tab" aria-selected="false" aria-controls="section-people">
        <span class="tab-icon" aria-hidden="true">ğŸ‘¤</span>
        <span class="tab-label">People</span>
      </button>
      <button class="nav-tab" data-section="battles" role="tab" aria-selected="false" aria-controls="section-battles">
        <span class="tab-icon" aria-hidden="true">âš”ï¸</span>
        <span class="tab-label">Battles</span>
      </button>
      <button class="nav-tab" data-section="quiz" role="tab" aria-selected="false" aria-controls="section-quiz">
        <span class="tab-icon" aria-hidden="true">ğŸ†</span>
        <span class="tab-label">Quiz</span>
      </button>
      <button class="nav-tab" data-section="about" role="tab" aria-selected="false" aria-controls="section-about">
        <span class="tab-icon" aria-hidden="true">â„¹ï¸</span>
        <span class="tab-label">About</span>
      </button>
    </div>
  </div>
</nav>

<main id="main-content">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HOME SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="section-home" class="section active" role="tabpanel" aria-labelledby="tab-home">

  <!-- Hero -->
  <div class="hero">
    <div class="hero-eyebrow">
      <span>ğŸ‡ºğŸ‡¸</span>
      <span>American Revolution Â· 1777</span>
    </div>
    <h1 class="hero-title">
      <span class="title-line1">The Road to</span>
      <span class="title-highlight">Saratoga</span>
    </h1>
    <p class="hero-tagline">The battle that changed everything â€” and helped America win its freedom.</p>
    <button class="hero-cta" onclick="switchSection('story')" aria-label="Start your journey into the story">
      Start Your Journey <span aria-hidden="true">â†’</span>
    </button>
    <div class="hero-scroll-hint" aria-hidden="true">
      <span>Scroll for fast facts</span>
      <div class="scroll-arrow"></div>
    </div>
  </div>

  <!-- Fast Facts -->
  <div class="fast-facts">
    <div class="fast-facts-inner">
      <h2>Quick Facts</h2>
      <div class="fast-facts-grid">
        <div class="fact-card" data-stagger="0">
          <div class="fact-icon" aria-hidden="true">ğŸ“…</div>
          <div class="fact-label">When</div>
          <div class="fact-value">September â€“ October 1777</div>
        </div>
        <div class="fact-card" data-stagger="1">
          <div class="fact-icon" aria-hidden="true">ğŸ“</div>
          <div class="fact-label">Where</div>
          <div class="fact-value">Saratoga, New York</div>
        </div>
        <div class="fact-card" data-stagger="2">
          <div class="fact-icon" aria-hidden="true">ğŸ³ï¸</div>
          <div class="fact-label">Result</div>
          <div class="fact-value">6,000 British soldiers surrendered</div>
        </div>
      </div>
    </div>
  </div>

</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     THE STORY â€” TIMELINE SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="section-story" class="section" role="tabpanel" aria-labelledby="tab-story">
  <div class="section-inner">
    <div class="section-header">
      <div class="badge">ğŸ“– The Story</div>
      <h2>How It All Happened</h2>
      <p>Follow the road to Saratoga â€” from the British plan to the final surrender.</p>
    </div>

    <!-- Context intro -->
    <div style="background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;margin-bottom:2.5rem;box-shadow:var(--shadow-sm);">
      <h3 style="margin-bottom:0.6rem;">âš¡ The Big Picture</h3>
      <p style="color:var(--slate);font-size:0.95rem;">Britain wanted to cut the 13 colonies in half by taking control of the Hudson River Valley. If they could split New England from the rest of the colonies, the American Revolution might fall apart. Three British armies were supposed to meet in Albany, New York â€” but the plan didn't go as expected!</p>
    </div>

    <div class="timeline" id="timeline">

      <!-- Node 1 -->
      <div class="timeline-node">
        <div class="timeline-dot" aria-hidden="true"></div>
        <div class="timeline-card british">
          <div class="timeline-badge">ğŸ“… July 1, 1777</div>
          <div class="timeline-icon" aria-hidden="true">ğŸ°</div>
          <h3>Fort Ticonderoga Falls</h3>
          <p>British General John Burgoyne marched south from Canada with about 7,500 soldiers. His first big win was capturing Fort Ticonderoga â€” an important American fort. It seemed like the British plan was working perfectly. But the real challenges were just ahead.</p>
        </div>
      </div>

      <!-- Node 2 -->
      <div class="timeline-node">
        <div class="timeline-dot" aria-hidden="true"></div>
        <div class="timeline-card american">
          <div class="timeline-badge">ğŸ“… August 16, 1777</div>
          <div class="timeline-icon" aria-hidden="true">ğŸŒ¿</div>
          <h3>Battle of Bennington</h3>
          <p>American General Philip Schuyler made life very hard for Burgoyne's army. His soldiers chopped down trees and destroyed bridges, turning a short trip into a full month of slow marching. Then, at Bennington, Colonel John Stark's militia (local soldiers) destroyed about 1,000 of Burgoyne's men. Burgoyne's supplies were running dangerously low.</p>
        </div>
      </div>

      <!-- Node 3 -->
      <div class="timeline-node">
        <div class="timeline-dot" aria-hidden="true"></div>
        <div class="timeline-card battle">
          <div class="timeline-badge">ğŸ“… September 19, 1777</div>
          <div class="timeline-icon" aria-hidden="true">âš”ï¸</div>
          <h3>Battle of Freeman's Farm</h3>
          <p>Burgoyne split his army into three groups and pushed toward the American lines. For over three hours, fierce fighting raged in a clearing called Freeman's Farm. Daniel Morgan's expert riflemen (sharpshooters) picked off almost every British officer. Benedict Arnold led bold attacking moves. The British held the field but lost about 600 men â€” twice the American losses.</p>
        </div>
      </div>

      <!-- Node 4 -->
      <div class="timeline-node">
        <div class="timeline-dot" aria-hidden="true"></div>
        <div class="timeline-card stalemate">
          <div class="timeline-badge">ğŸ“… Sept 20 â€“ Oct 6, 1777</div>
          <div class="timeline-icon" aria-hidden="true">â³</div>
          <h3>The Waiting Game</h3>
          <p>After Freeman's Farm, both sides dug in and waited. Burgoyne hoped for reinforcements from General Clinton in New York City â€” they never came close enough. Meanwhile, American forces grew from 9,000 to over 13,000 as militia joined from across the region. British soldiers were put on half rations (half their normal food). Inside the American camp, General Gates and Benedict Arnold had a huge fight, and Gates took away Arnold's command. That decision would have surprising consequences...</p>
        </div>
      </div>

      <!-- Node 5 -->
      <div class="timeline-node">
        <div class="timeline-dot" aria-hidden="true"></div>
        <div class="timeline-card battle">
          <div class="timeline-badge">ğŸ“… October 7, 1777</div>
          <div class="timeline-icon" aria-hidden="true">ğŸ”¥</div>
          <h3>Battle of Bemis Heights</h3>
          <p>Burgoyne made one last desperate move, sending 1,500 troops to probe the American lines. Morgan's sharpshooters fatally shot the respected British general Simon Fraser. Then something amazing happened â€” Benedict Arnold, with no official command, charged onto the battlefield on horseback! He led a furious attack that broke through the Breymann Redoubt (a German defensive position). Arnold was shot in the leg, but the Americans won a decisive victory.</p>
        </div>
      </div>

      <!-- Node 6 -->
      <div class="timeline-node">
        <div class="timeline-dot" aria-hidden="true"></div>
        <div class="timeline-card american">
          <div class="timeline-badge">ğŸ“… October 17, 1777</div>
          <div class="timeline-icon" aria-hidden="true">ğŸ³ï¸</div>
          <h3>The Surrender</h3>
          <p>Burgoyne retreated north, but found himself surrounded by nearly 20,000 American soldiers. He had no choice. On October 17, 1777, he surrendered about 6,000 remaining troops under the Convention of Saratoga. In a moment of dramatic irony, he wore his finest scarlet uniform with gold braid â€” the very outfit he had planned to wear marching triumphantly into Albany as a conqueror. America had won the turning point of the Revolution!</p>
        </div>
      </div>

    </div><!-- /timeline -->
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PEOPLE SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="section-people" class="section" role="tabpanel" aria-labelledby="tab-people">
  <div class="section-inner">
    <div class="section-header">
      <div class="badge">ğŸ‘¤ The People</div>
      <h2>Key Figures at Saratoga</h2>
      <p>Meet the commanders, heroes, and key players who shaped the outcome of the battles.</p>
    </div>
    <div class="people-grid" id="people-grid">

      <!-- 1. Burgoyne -->
      <!-- PORTRAIT: General John Burgoyne -->
      <article class="person-card" aria-label="General John Burgoyne">
        <div class="person-avatar-wrap">
          <div class="person-avatar british"><img src="./assets/burgoyne.jpg" alt="Portrait of General John Burgoyne by Joshua Reynolds, c. 1766. Public domain."></div>
        </div>
        <span class="person-faction british">ğŸ‡¬ğŸ‡§ British</span>
        <h3 class="person-name">Gen. John Burgoyne</h3>
        <p class="person-title">British Commander</p>
        <p class="person-bio">Burgoyne led about 7,500 soldiers south from Canada in 1777. He had a bold plan to split the American colonies in two. But American resistance, dwindling supplies, and no help from the other British armies led to his downfall. He surrendered his entire remaining army at Saratoga â€” one of the most shocking defeats in British military history.</p>
        <button class="fun-fact-toggle" aria-expanded="false" aria-controls="fact-burgoyne">
          <span>â­ Fun Fact</span>
          <span class="toggle-arrow" aria-hidden="true">â–¼</span>
        </button>
        <div class="fun-fact-body" id="fact-burgoyne" role="region">
          Burgoyne was nicknamed "Gentleman Johnny" because he loved fancy parties and the theater!
        </div>
      </article>

      <!-- 2. Horatio Gates -->
      <!-- PORTRAIT: General Horatio Gates -->
      <article class="person-card" aria-label="General Horatio Gates">
        <div class="person-avatar-wrap">
          <div class="person-avatar american"><img src="./assets/gates.jpg" alt="Portrait of General Horatio Gates by Gilbert Stuart, c. 1793. Public domain."></div>
        </div>
        <span class="person-faction american">ğŸ‡ºğŸ‡¸ American</span>
        <h3 class="person-name">Gen. Horatio Gates</h3>
        <p class="person-title">American Commander</p>
        <p class="person-bio">General Gates commanded the American forces at Saratoga. He was a careful, defensive strategist who preferred to let the British tire themselves out. His approach worked well â€” he kept his army strong while Burgoyne's grew weaker. After the American victory, he became one of the most celebrated generals in the Revolution, though his argument with Arnold remains controversial.</p>
        <button class="fun-fact-toggle" aria-expanded="false" aria-controls="fact-gates">
          <span>â­ Fun Fact</span>
          <span class="toggle-arrow" aria-hidden="true">â–¼</span>
        </button>
        <div class="fun-fact-body" id="fact-gates" role="region">
          Gates was actually born in England but chose to fight for American freedom!
        </div>
      </article>

      <!-- 3. Benedict Arnold -->
      <!-- PORTRAIT: Benedict Arnold -->
      <article class="person-card" aria-label="Benedict Arnold">
        <div class="person-avatar-wrap">
          <div class="person-avatar american"><img src="./assets/arnold.jpg" alt="Engraving of Benedict Arnold by H.B. Hall after John Trumbull. Public domain."></div>
        </div>
        <span class="person-faction american">ğŸ‡ºğŸ‡¸ American</span>
        <h3 class="person-name">Benedict Arnold</h3>
        <p class="person-title">Field Commander (Hero &amp; Traitor)</p>
        <p class="person-bio">Arnold was one of the bravest and most effective American commanders at Saratoga. He led bold attacks at Freeman's Farm and charged the battlefield at Bemis Heights even after being stripped of his command â€” getting shot in the leg in the process. Sadly, he later became America's most infamous traitor by switching sides to the British.</p>
        <button class="fun-fact-toggle" aria-expanded="false" aria-controls="fact-arnold">
          <span>â­ Fun Fact</span>
          <span class="toggle-arrow" aria-hidden="true">â–¼</span>
        </button>
        <div class="fun-fact-body" id="fact-arnold" role="region">
          Benedict Arnold was once considered the greatest hero of the Revolution before he switched sides!
        </div>
      </article>

      <!-- 4. Daniel Morgan -->
      <!-- PORTRAIT: Colonel Daniel Morgan -->
      <article class="person-card" aria-label="Colonel Daniel Morgan">
        <div class="person-avatar-wrap">
          <div class="person-avatar american"><img src="./assets/morgan.jpg" alt="Portrait of Colonel Daniel Morgan. Public domain."></div>
        </div>
        <span class="person-faction american">ğŸ‡ºğŸ‡¸ American</span>
        <h3 class="person-name">Col. Daniel Morgan</h3>
        <p class="person-title">Commander of Virginia Riflemen</p>
        <p class="person-bio">Daniel Morgan led a special unit of Virginia riflemen â€” expert sharpshooters who could hit targets from incredible distances. His men were famous for aiming at British officers during battle, which disrupted British attacks and caused confusion in their ranks. At Bemis Heights, Morgan's riflemen fatally shot the respected British general Simon Fraser.</p>
        <button class="fun-fact-toggle" aria-expanded="false" aria-controls="fact-morgan">
          <span>â­ Fun Fact</span>
          <span class="toggle-arrow" aria-hidden="true">â–¼</span>
        </button>
        <div class="fun-fact-body" id="fact-morgan" role="region">
          Before the war, Morgan was a tough frontier wagon driver who survived being shot through the neck!
        </div>
      </article>

      <!-- 5. KoÅ›ciuszko -->
      <!-- PORTRAIT: Tadeusz KoÅ›ciuszko -->
      <article class="person-card" aria-label="Tadeusz KoÅ›ciuszko">
        <div class="person-avatar-wrap">
          <div class="person-avatar american"><img src="./assets/kosciuszko.jpg" alt="Portrait of Tadeusz KoÅ›ciuszko by Karl Schweikart. Public domain."></div>
        </div>
        <span class="person-faction american">ğŸ‡ºğŸ‡¸ American</span>
        <h3 class="person-name">Tadeusz KoÅ›ciuszko</h3>
        <p class="person-title">Military Engineer</p>
        <p class="person-bio">KoÅ›ciuszko (koh-SHOOS-koh) was a brilliant military engineer from Poland who came to America to help fight for freedom. He designed the powerful fortifications on Bemis Heights that gave the Americans such a strong defensive position. His clever use of the landscape forced Burgoyne into desperate attacks that cost the British dearly.</p>
        <button class="fun-fact-toggle" aria-expanded="false" aria-controls="fact-kos">
          <span>â­ Fun Fact</span>
          <span class="toggle-arrow" aria-hidden="true">â–¼</span>
        </button>
        <div class="fun-fact-body" id="fact-kos" role="region">
          KoÅ›ciuszko loved freedom so much, he traveled across the ocean from Poland to help America fight for it!
        </div>
      </article>

      <!-- 6. Simon Fraser -->
      <!-- PORTRAIT: General Simon Fraser -->
      <article class="person-card" aria-label="General Simon Fraser">
        <div class="person-avatar-wrap">
          <div class="person-avatar british"><img src="./assets/fraser.jpg" alt="Mezzotint of Brigadier General Simon Fraser, 1778. Public domain."></div>
        </div>
        <span class="person-faction british">ğŸ‡¬ğŸ‡§ British</span>
        <h3 class="person-name">Gen. Simon Fraser</h3>
        <p class="person-title">British Brigadier General</p>
        <p class="person-bio">Simon Fraser was one of the most respected and skilled generals in Burgoyne's army. He was a brave leader who always led from the front. On October 7, 1777, during the Battle of Bemis Heights, he was fatally shot by one of Daniel Morgan's expert riflemen. His loss was a huge blow to British morale during the battle.</p>
        <button class="fun-fact-toggle" aria-expanded="false" aria-controls="fact-fraser">
          <span>â­ Fun Fact</span>
          <span class="toggle-arrow" aria-hidden="true">â–¼</span>
        </button>
        <div class="fun-fact-body" id="fact-fraser" role="region">
          Fraser was so respected that even the Americans honored him with a proper burial after the battle.
        </div>
      </article>

    </div><!-- /people-grid -->
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BATTLES SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="section-battles" class="section" role="tabpanel" aria-labelledby="tab-battles">
  <div class="section-inner">
    <div class="section-header">
      <div class="badge">âš”ï¸ The Battles</div>
      <h2>Battle Breakdowns</h2>
      <p>Explore both battles with maps, troop movements, and key statistics.</p>
    </div>

    <!-- Battle Tabs -->
    <div class="battle-tabs" role="tablist" aria-label="Battle selection">
      <button class="battle-tab-btn active" data-btab="freeman" role="tab" aria-selected="true">
        âš”ï¸ Freeman's Farm
      </button>
      <button class="battle-tab-btn" data-btab="bemis" role="tab" aria-selected="false">
        ğŸ”¥ Bemis Heights
      </button>
      <button class="battle-tab-btn compare" data-btab="compare" role="tab" aria-selected="false">
        ğŸ“Š Compare Battles
      </button>
    </div>

    <!-- FREEMAN'S FARM panel -->
    <div class="battle-panel active" id="btab-freeman" role="tabpanel">
      <div class="battle-layout">
        <div>
          <div class="battle-map-container">
            <h4>Battle Map â€” Freeman's Farm</h4>
            <!-- SVG Battle Map -->
            <svg viewBox="0 0 360 300" xmlns="http://www.w3.org/2000/svg" aria-label="Map of Freeman's Farm battle showing troop positions and movements">
              <!-- Ground -->
              <rect width="360" height="300" fill="#d4e8a0"/>
              <!-- Hudson River (east side) -->
              <rect x="310" y="0" width="50" height="300" fill="#9fc8e8" opacity="0.7"/>
              <text x="335" y="150" text-anchor="middle" font-size="9" fill="#1a5276" transform="rotate(-90 335 150)" font-family="Inter, sans-serif" font-weight="600">Hudson River</text>
              <!-- Freeman's Farm clearing -->
              <rect x="120" y="90" width="130" height="80" fill="#e8d5a0" rx="4" stroke="#c9a96e" stroke-width="1"/>
              <text x="185" y="135" text-anchor="middle" font-size="8" fill="#78350F" font-family="Inter, sans-serif" font-weight="600">Freeman's Farm</text>
              <!-- AMERICAN positions (Blue) -->
              <rect x="20" y="130" width="70" height="28" fill="#1D4ED8" rx="4" opacity="0.9"/>
              <text x="55" y="148" text-anchor="middle" font-size="9" fill="white" font-family="Inter, sans-serif" font-weight="700">GATES' HQ</text>
              <rect x="20" y="170" width="60" height="24" fill="#1D4ED8" rx="4" opacity="0.85"/>
              <text x="50" y="185" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">ARNOLD</text>
              <rect x="20" y="200" width="60" height="24" fill="#2563EB" rx="4" opacity="0.85"/>
              <text x="50" y="215" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">MORGAN</text>
              <!-- BRITISH positions (Red) -->
              <rect x="255" y="40" width="50" height="24" fill="#DC2626" rx="4" opacity="0.9"/>
              <text x="280" y="56" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">FRASER</text>
              <rect x="215" y="80" width="65" height="24" fill="#DC2626" rx="4" opacity="0.9"/>
              <text x="247" y="96" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">BURGOYNE</text>
              <rect x="215" y="188" width="65" height="24" fill="#b91c1c" rx="4" opacity="0.85"/>
              <text x="247" y="204" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">RIEDESEL</text>
              <!-- ANIMATED ARROWS: British advances -->
              <path d="M 247 104 L 210 120" fill="none" stroke="#DC2626" stroke-width="3" stroke-linecap="round"
                class="svg-arrow" marker-end="url(#arrowRed)"/>
              <path d="M 280 64 L 240 90" fill="none" stroke="#DC2626" stroke-width="2.5" stroke-linecap="round"
                class="svg-arrow-2" marker-end="url(#arrowRed)"/>
              <!-- ANIMATED ARROWS: American counterattacks -->
              <path d="M 80 178 L 130 155" fill="none" stroke="#1D4ED8" stroke-width="3" stroke-linecap="round"
                class="svg-arrow-2" marker-end="url(#arrowBlue)"/>
              <path d="M 80 210 L 120 175" fill="none" stroke="#1D4ED8" stroke-width="2.5" stroke-linecap="round"
                class="svg-arrow-3" marker-end="url(#arrowBlue)"/>
              <!-- Labels -->
              <text x="12" y="20" font-size="9" fill="#64748B" font-family="Inter, sans-serif" font-weight="600">N â†‘</text>
              <text x="30" y="270" font-size="8" fill="#1D4ED8" font-family="Inter, sans-serif" font-weight="700">ğŸ”µ American Lines</text>
              <text x="30" y="285" font-size="8" fill="#DC2626" font-family="Inter, sans-serif" font-weight="700">ğŸ”´ British Advance</text>
              <!-- Arrow defs -->
              <defs>
                <marker id="arrowRed" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                  <path d="M 0 0 L 6 3 L 0 6 Z" fill="#DC2626"/>
                </marker>
                <marker id="arrowBlue" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                  <path d="M 0 0 L 6 3 L 0 6 Z" fill="#1D4ED8"/>
                </marker>
              </defs>
            </svg>
            <div class="map-legend">
              <div class="legend-item"><div class="legend-dot blue"></div>American</div>
              <div class="legend-item"><div class="legend-dot red"></div>British</div>
            </div>
          </div>
        </div>
        <div class="battle-info">
          <h3>âš”ï¸ Freeman's Farm â€” September 19, 1777</h3>
          <div class="battle-stats-grid">
            <div class="stat-box">
              <div class="stat-label">Date</div>
              <div class="stat-value">Sept 19, 1777</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">Duration</div>
              <div class="stat-value">3+ Hours</div>
            </div>
            <div class="stat-box highlight">
              <div class="stat-label">British Casualties</div>
              <div class="stat-value">~600</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">American Casualties</div>
              <div class="stat-value">~300</div>
            </div>
          </div>
          <div class="battle-bullets">
            <h4>What Happened</h4>
            <ul>
              <li>Burgoyne split his army into three columns to probe American defenses and look for weak spots.</li>
              <li>Fighting lasted over three hours in a clearing around Freeman's Farm â€” one of the longest land battles of the entire Revolution.</li>
              <li>Daniel Morgan's expert riflemen picked off almost every officer in the British advance, causing chaos in their ranks.</li>
              <li>Benedict Arnold led bold flanking (side-attack) maneuvers that pushed the British back again and again.</li>
              <li>The British held the field at the end, but their losses were twice those of the Americans â€” a sign of battles to come.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- BEMIS HEIGHTS panel -->
    <div class="battle-panel" id="btab-bemis" role="tabpanel">
      <div class="battle-layout">
        <div>
          <div class="battle-map-container">
            <h4>Battle Map â€” Bemis Heights</h4>
            <svg viewBox="0 0 360 300" xmlns="http://www.w3.org/2000/svg" aria-label="Map of Bemis Heights battle showing troop positions and the decisive assault">
              <!-- Ground -->
              <rect width="360" height="300" fill="#d4e8a0"/>
              <!-- Hudson River -->
              <rect x="310" y="0" width="50" height="300" fill="#9fc8e8" opacity="0.7"/>
              <text x="335" y="150" text-anchor="middle" font-size="9" fill="#1a5276" transform="rotate(-90 335 150)" font-family="Inter, sans-serif" font-weight="600">Hudson River</text>
              <!-- Heights elevation indicator -->
              <rect x="0" y="140" width="360" height="6" fill="#a0855a" opacity="0.4" rx="2"/>
              <text x="155" y="156" font-size="8" fill="#78350F" font-family="Inter, sans-serif" font-weight="600">â€” Bemis Heights Ridge â€”</text>
              <!-- American fortifications (Blue) -->
              <rect x="15" y="160" width="90" height="30" fill="#1D4ED8" rx="6" opacity="0.9"/>
              <text x="60" y="179" text-anchor="middle" font-size="9" fill="white" font-family="Inter, sans-serif" font-weight="700">AMERICAN FORT</text>
              <text x="60" y="189" text-anchor="middle" font-size="7" fill="rgba(255,255,255,0.8)" font-family="Inter, sans-serif">(KoÅ›ciuszko design)</text>
              <!-- Breymann Redoubt (German/Green) -->
              <rect x="220" y="70" width="70" height="28" fill="#16A34A" rx="4" opacity="0.9"/>
              <text x="255" y="86" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">BREYMANN</text>
              <text x="255" y="96" text-anchor="middle" font-size="7" fill="rgba(255,255,255,0.8)" font-family="Inter, sans-serif">REDOUBT</text>
              <!-- British positions (Red) -->
              <rect x="200" y="30" width="55" height="24" fill="#DC2626" rx="4" opacity="0.9"/>
              <text x="227" y="46" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">FRASER</text>
              <rect x="210" y="120" width="65" height="24" fill="#DC2626" rx="4" opacity="0.85"/>
              <text x="242" y="136" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">BURGOYNE</text>
              <!-- Morgan's position -->
              <rect x="30" y="200" width="55" height="24" fill="#2563EB" rx="4" opacity="0.85"/>
              <text x="57" y="215" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">MORGAN</text>
              <!-- Arnold's charge position -->
              <rect x="130" y="108" width="60" height="24" fill="#1D4ED8" rx="4" opacity="0.9"/>
              <text x="160" y="123" text-anchor="middle" font-size="8" fill="white" font-family="Inter, sans-serif" font-weight="700">ARNOLD âš¡</text>
              <!-- ANIMATED ARROWS: Arnold's charge at Breymann Redoubt -->
              <path d="M 190 118 L 225 90" fill="none" stroke="#1D4ED8" stroke-width="3.5" stroke-linecap="round"
                class="svg-arrow" marker-end="url(#arrowBlue2)"/>
              <!-- Morgan's shot at Fraser -->
              <path d="M 57 200 L 220 52" fill="none" stroke="#2563EB" stroke-width="2" stroke-dasharray="6,3"
                class="svg-arrow-2" stroke-linecap="round"/>
              <!-- British retreat -->
              <path d="M 242 118 L 295 90" fill="none" stroke="#DC2626" stroke-width="2.5" stroke-linecap="round"
                class="svg-arrow-3" marker-end="url(#arrowRed2)"/>
              <!-- Morgan advance -->
              <path d="M 85 210 L 200 150" fill="none" stroke="#1D4ED8" stroke-width="2.5" stroke-linecap="round"
                class="svg-arrow-2" marker-end="url(#arrowBlue2)"/>
              <!-- Labels -->
              <text x="12" y="20" font-size="9" fill="#64748B" font-family="Inter, sans-serif" font-weight="600">N â†‘</text>
              <text x="10" y="270" font-size="8" fill="#1D4ED8" font-family="Inter, sans-serif" font-weight="700">ğŸ”µ Americans  ğŸŸ¢ German  ğŸ”´ British</text>
              <text x="80" y="60" font-size="7.5" fill="#1D4ED8" font-family="Inter, sans-serif" font-style="italic">â€” Arnold's charge â†’</text>
              <text x="65" y="182" font-size="7" fill="#2563EB" font-family="Inter, sans-serif" font-style="italic">rifle shot</text>
              <defs>
                <marker id="arrowRed2" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                  <path d="M 0 0 L 6 3 L 0 6 Z" fill="#DC2626"/>
                </marker>
                <marker id="arrowBlue2" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                  <path d="M 0 0 L 6 3 L 0 6 Z" fill="#1D4ED8"/>
                </marker>
              </defs>
            </svg>
            <div class="map-legend">
              <div class="legend-item"><div class="legend-dot blue"></div>American</div>
              <div class="legend-item"><div class="legend-dot red"></div>British</div>
              <div class="legend-item"><div class="legend-dot green"></div>German</div>
            </div>
          </div>
        </div>
        <div class="battle-info">
          <h3>ğŸ”¥ Bemis Heights â€” October 7, 1777</h3>
          <div class="battle-stats-grid">
            <div class="stat-box">
              <div class="stat-label">Date</div>
              <div class="stat-value">Oct 7, 1777</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">British Troops</div>
              <div class="stat-value">1,500 sent</div>
            </div>
            <div class="stat-box highlight">
              <div class="stat-label">British Casualties</div>
              <div class="stat-value">~1,135</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">American Casualties</div>
              <div class="stat-value">~330</div>
            </div>
          </div>
          <div class="battle-bullets">
            <h4>What Happened</h4>
            <ul>
              <li>Burgoyne, running out of supplies and desperate for a breakthrough, sent 1,500 soldiers to attack the American left flank (side).</li>
              <li>Morgan's sharpshooters spotted the respected British commander General Simon Fraser rallying his troops â€” and fatally shot him, breaking British morale.</li>
              <li>Benedict Arnold, who had been stripped of his command by Gates, rode onto the battlefield anyway â€” shouting and rallying soldiers with no official authority.</li>
              <li>Arnold led a furious charge that broke through the Breymann Redoubt â€” the key German defensive position. He was shot in the leg during the attack.</li>
              <li>The British suffered more than three times the American casualties. This defeat made surrender inevitable â€” Burgoyne had no path forward.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- COMPARE panel -->
    <div class="battle-panel" id="btab-compare" role="tabpanel">
      <h3 style="margin-bottom:1.5rem;">ğŸ“Š Comparing the Two Battles</h3>
      <div style="overflow-x:auto;">
        <table class="compare-table">
          <thead>
            <tr>
              <th style="min-width:130px;">Category</th>
              <th>âš”ï¸ Freeman's Farm<br><small style="font-weight:500;font-size:0.78rem;">Sept 19, 1777</small></th>
              <th>ğŸ”¥ Bemis Heights<br><small style="font-weight:500;font-size:0.78rem;">Oct 7, 1777</small></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>British Troops</td>
              <td>~7,500 total (all 3 columns)</td>
              <td>1,500 sent on attack</td>
            </tr>
            <tr>
              <td>American Troops</td>
              <td>~9,000 (growing)</td>
              <td>13,000+ (well supplied)</td>
            </tr>
            <tr>
              <td>British Casualties</td>
              <td>~600</td>
              <td>~1,135</td>
            </tr>
            <tr>
              <td>American Casualties</td>
              <td>~300</td>
              <td>~330</td>
            </tr>
            <tr>
              <td>Field Control</td>
              <td>British (costly win)</td>
              <td>Americans (decisive)</td>
            </tr>
            <tr>
              <td>Key Figure</td>
              <td>Benedict Arnold (flanking)</td>
              <td>Arnold + Morgan (assault)</td>
            </tr>
            <tr>
              <td>Notable Death</td>
              <td>Many British officers</td>
              <td>General Simon Fraser</td>
            </tr>
            <tr>
              <td>Battle Duration</td>
              <td>3+ hours</td>
              <td>Shorter, but decisive</td>
            </tr>
            <tr>
              <td>British Morale After</td>
              <td>Damaged</td>
              <td>Broken â€” led to surrender</td>
            </tr>
            <tr>
              <td>Outcome</td>
              <td>Tactical British win, strategic loss</td>
              <td>Clear American victory</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div style="background:var(--blue-light);border:1px solid #BFDBFE;border-radius:var(--radius-sm);padding:1rem 1.25rem;margin-top:1.5rem;">
        <p style="font-size:0.9rem;color:var(--blue-dark);font-weight:600;">ğŸ’¡ Key Takeaway: Freeman's Farm showed that the Americans could fight the British to a standstill. Bemis Heights proved they could beat them decisively. Together, these two battles forced Burgoyne's surrender and changed the course of the war.</p>
      </div>
    </div>

    <!-- Why It Matters -->
    <div style="margin-top:3rem;">
      <h3 style="margin-bottom:1.25rem;text-align:center;">ğŸŒŸ Why Saratoga Changed History</h3>
      <div style="display:grid;grid-template-columns:1fr;gap:1rem;">
        <div style="background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius-sm);padding:1.1rem 1.25rem;display:flex;align-items:flex-start;gap:0.875rem;box-shadow:var(--shadow-sm);">
          <span style="font-size:1.5rem;flex-shrink:0;">ğŸ‡«ğŸ‡·</span>
          <div><strong>France Joined the Fight</strong> â€” The victory convinced France to formally ally with America on February 6, 1778. France brought soldiers, money, weapons, and crucial naval power.</div>
        </div>
        <div style="background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius-sm);padding:1.1rem 1.25rem;display:flex;align-items:flex-start;gap:0.875rem;box-shadow:var(--shadow-sm);">
          <span style="font-size:1.5rem;flex-shrink:0;">ğŸ’ª</span>
          <div><strong>Proved Americans Could Win</strong> â€” Saratoga showed the world that a citizen army could defeat a professional European military force.</div>
        </div>
        <div style="background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius-sm);padding:1.1rem 1.25rem;display:flex;align-items:flex-start;gap:0.875rem;box-shadow:var(--shadow-sm);">
          <span style="font-size:1.5rem;flex-shrink:0;">ğŸ—ºï¸</span>
          <div><strong>Ended the British Plan</strong> â€” The British strategy to split New England from the other colonies was permanently stopped.</div>
        </div>
        <div style="background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius-sm);padding:1.1rem 1.25rem;display:flex;align-items:flex-start;gap:0.875rem;box-shadow:var(--shadow-sm);">
          <span style="font-size:1.5rem;flex-shrink:0;">ğŸ”¥</span>
          <div><strong>Boosted Patriot Morale</strong> â€” News of the victory lifted spirits across all 13 colonies and gave Americans renewed hope and energy.</div>
        </div>
        <div style="background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius-sm);padding:1.1rem 1.25rem;display:flex;align-items:flex-start;gap:0.875rem;box-shadow:var(--shadow-sm);">
          <span style="font-size:1.5rem;flex-shrink:0;">ğŸ†</span>
          <div><strong>Led to Final Victory</strong> â€” French support from the alliance helped Americans win the final battle at Yorktown in 1781, securing American independence.</div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     QUIZ & FUN ZONE SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="section-quiz" class="section" role="tabpanel" aria-labelledby="tab-quiz">
  <div class="section-inner">
    <div class="section-header">
      <div class="badge">ğŸ† Quiz &amp; Fun Zone</div>
      <h2>Test Your Knowledge!</h2>
      <p>Take the quiz, arrange the timeline, and flip through fun facts!</p>
    </div>

    <!-- Quiz Zone sub-tabs -->
    <div class="quiz-zone-tabs" role="tablist" aria-label="Quiz zone activities">
      <button class="qz-tab-btn active" data-qztab="quiz" role="tab" aria-selected="true">ğŸ§  Quiz</button>
      <button class="qz-tab-btn" data-qztab="dnd" role="tab" aria-selected="false">ğŸ—“ï¸ Timeline</button>
      <button class="qz-tab-btn" data-qztab="flash" role="tab" aria-selected="false">ğŸ“š Flashcards</button>
    </div>

    <!-- KNOWLEDGE QUIZ -->
    <div class="qz-panel active" id="qz-quiz">
      <!-- Progress bar -->
      <div class="quiz-progress-wrap">
        <div class="quiz-progress-header">
          <span id="quiz-progress-text">Question 1 of 10</span>
          <span class="quiz-score-display">Score: <span id="quiz-score-val">0</span> / 10</span>
        </div>
        <div class="progress-bar-track" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" aria-label="Quiz progress">
          <div class="progress-bar-fill" id="quiz-progress-bar" style="width:0%"></div>
        </div>
      </div>

      <!-- Quiz card -->
      <div class="quiz-card" id="quiz-active-card">
        <div class="quiz-q-number" id="quiz-q-num">Question 1 of 10</div>
        <div class="quiz-question" id="quiz-question-text">Loading...</div>
        <div class="quiz-feedback" id="quiz-feedback" aria-live="polite"></div>
        <div class="quiz-options" id="quiz-options-list" role="radiogroup" aria-label="Answer choices"></div>
        <div style="display:flex;align-items:center;flex-wrap:wrap;gap:0.5rem;">
          <button class="quiz-submit-btn" id="quiz-submit-btn" disabled aria-label="Submit your answer">Submit Answer</button>
          <button class="quiz-next-btn hidden" id="quiz-next-btn" aria-label="Go to next question">Next â†’</button>
        </div>
      </div>

      <!-- End screen -->
      <div class="quiz-end" id="quiz-end-screen" aria-live="polite">
        <div class="quiz-end-badge" id="quiz-end-badge">ğŸ…</div>
        <div class="quiz-end-title" id="quiz-end-title">Saratoga Scholar!</div>
        <div class="quiz-end-score" id="quiz-end-score">10 / 10</div>
        <div class="quiz-end-subtitle" id="quiz-end-subtitle">Outstanding work, historian!</div>
        <button class="quiz-retake-btn" id="quiz-retake-btn" aria-label="Retake the quiz">ğŸ”„ Retake Quiz</button>
      </div>
    </div>

    <!-- DRAG AND DROP TIMELINE -->
    <div class="qz-panel" id="qz-dnd">
      <p class="dnd-instruction">
        <strong>Challenge:</strong> Drag the events from the scrambled list on the left and drop them into the correct order on the right! On mobile, tap and hold to drag.
      </p>
      <div class="dnd-container">
        <!-- Scrambled items -->
        <div class="dnd-panel">
          <h4>ğŸ”€ Scrambled Events</h4>
          <div class="dnd-items-list" id="dnd-source" aria-label="Scrambled events to sort">
          </div>
        </div>
        <!-- Drop zone -->
        <div class="dnd-panel">
          <h4>ğŸ“‹ Correct Order (1 â†’ 6)</h4>
          <div class="dnd-drop-zone" id="dnd-target" aria-label="Drop zone for ordered events">
          </div>
        </div>
      </div>
      <button class="dnd-check-btn" id="dnd-check-btn" aria-label="Check your timeline order">âœ… Check My Order</button>
      <button class="dnd-reset-btn" id="dnd-reset-btn" aria-label="Reset timeline challenge">â†©ï¸ Reset</button>
      <div class="dnd-result" id="dnd-result" aria-live="polite"></div>
    </div>

    <!-- FLASHCARDS -->
    <div class="qz-panel" id="qz-flash">
      <p class="flashcard-intro"><strong>Click or tap any card to flip it</strong> and reveal the surprising answer!</p>
      <div class="flashcard-grid" id="flashcard-grid">
      </div>
    </div>

  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ABOUT SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="section-about" class="section" role="tabpanel" aria-labelledby="tab-about">
  <div class="section-inner">
    <div class="section-header">
      <div class="badge">â„¹ï¸ About This Project</div>
      <h2>Bull Run Middle School Project</h2>
    </div>
    <div style="max-width: 640px; margin: 0 auto; text-align: center;">
      <div style="background: var(--bg-white); border-radius: var(--radius); padding: 2.5rem; box-shadow: var(--shadow);">
        <p style="font-size: 1.1rem; font-weight: 600; color: var(--charcoal); margin-bottom: 1rem;">Developed by</p>
        <p style="font-size: 1.5rem; font-weight: 800; color: var(--blue); margin-bottom: 0.25rem;">Aaron Le and Luca Brooks</p>
        <hr style="border: none; border-top: 1px solid var(--border); margin: 1.5rem 0;">
        <p style="color: var(--slate); line-height: 1.7; font-size: 0.95rem;">This interactive web app was created as a school project to teach students about the Battles of Saratoga during the American Revolutionary War. All historical facts have been carefully researched and verified.</p>
        <p style="color: var(--slate); line-height: 1.7; font-size: 0.85rem; margin-top: 1rem;">Portrait images are public domain works sourced from Wikimedia Commons.</p>
      </div>
    </div>
  </div>
</section>

</main>

<!-- Confetti container -->
<div class="confetti-container" id="confetti-container" aria-hidden="true"></div>

<footer>
  <strong>The Road to Saratoga</strong><br>
  An interactive educational experience about the Battles of Saratoga (1777)<br>
  Built for middle school students learning American Revolutionary War history.
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
(function() {
  'use strict';

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // STATE (all in-memory, no storage APIs)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let currentSection = 'home';

  // Quiz state
  let quizQuestions = [];
  let currentQuestionIndex = 0;
  let quizScore = 0;
  let quizAnswered = false;
  let selectedOptionIndex = null;

  // DnD state
  let draggedItem = null;
  let draggedFromSource = false;
  let touchStartX = 0;
  let touchStartY = 0;
  let touchClone = null;
  let touchDragging = false;
  let currentTouchTarget = null;

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // NAVIGATION
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setupNav() {
    const tabs = document.querySelectorAll('.nav-tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const sectionId = tab.dataset.section;
        switchSection(sectionId);
      });
    });

    // Handle responsive nav class on body
    applyNavClass();
    window.addEventListener('resize', applyNavClass);
  }

  function applyNavClass() {
    if (window.innerWidth >= 640) {
      document.body.classList.add('top-nav-active');
    } else {
      document.body.classList.remove('top-nav-active');
    }
  }

  window.switchSection = function(sectionId) {
    // Hide all sections
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    // Show target
    const target = document.getElementById('section-' + sectionId);
    if (target) {
      target.classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    // Update nav tabs
    document.querySelectorAll('.nav-tab').forEach(t => {
      t.classList.toggle('active', t.dataset.section === sectionId);
      t.setAttribute('aria-selected', t.dataset.section === sectionId ? 'true' : 'false');
    });
    currentSection = sectionId;

    // Trigger scroll animations for newly shown section
    setTimeout(() => {
      checkScrollAnimations();
      if (sectionId === 'battles') restartBattleMapAnimations();
    }, 50);
  };

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // SCROLL ANIMATIONS (IntersectionObserver)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setupScrollAnimations() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const el = entry.target;
          const stagger = el.dataset.stagger ? parseInt(el.dataset.stagger) * 120 : 0;
          setTimeout(() => {
            el.classList.add('animate-in');
          }, stagger);
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

    // Observe timeline nodes
    document.querySelectorAll('.timeline-node').forEach(el => observer.observe(el));
    // Observe fact cards
    document.querySelectorAll('.fact-card').forEach(el => observer.observe(el));
    // Observe people cards
    document.querySelectorAll('.person-card').forEach((el, i) => {
      el.dataset.stagger = i;
      observer.observe(el);
    });
  }

  function checkScrollAnimations() {
    // Force-check all observable elements (for section switches)
    document.querySelectorAll('.timeline-node, .fact-card, .person-card').forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.top < window.innerHeight - 40) {
        const stagger = el.dataset.stagger ? parseInt(el.dataset.stagger) * 120 : 0;
        setTimeout(() => el.classList.add('animate-in'), stagger);
      }
    });
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // FUN FACT ACCORDIONS
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setupAccordions() {
    document.querySelectorAll('.fun-fact-toggle').forEach(btn => {
      btn.addEventListener('click', () => {
        const bodyId = btn.getAttribute('aria-controls');
        const body = document.getElementById(bodyId);
        const isOpen = body.classList.contains('open');
        body.classList.toggle('open', !isOpen);
        btn.classList.toggle('open', !isOpen);
        btn.setAttribute('aria-expanded', !isOpen);
      });
    });
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // BATTLE TABS
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setupBattleTabs() {
    document.querySelectorAll('.battle-tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.battle-tab-btn').forEach(b => {
          b.classList.remove('active');
          b.setAttribute('aria-selected', 'false');
        });
        document.querySelectorAll('.battle-panel').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        btn.setAttribute('aria-selected', 'true');
        const target = document.getElementById('btab-' + btn.dataset.btab);
        if (target) {
          target.classList.add('active');
          restartBattleMapAnimations();
        }
      });
    });
  }

  function restartBattleMapAnimations() {
    // Re-trigger SVG dash animations by cloning
    document.querySelectorAll('.svg-arrow, .svg-arrow-2, .svg-arrow-3').forEach(el => {
      el.style.animation = 'none';
      void el.offsetWidth; // reflow
      el.style.animation = '';
    });
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // QUIZ ZONE TABS
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setupQuizZoneTabs() {
    document.querySelectorAll('.qz-tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.qz-tab-btn').forEach(b => {
          b.classList.remove('active');
          b.setAttribute('aria-selected', 'false');
        });
        document.querySelectorAll('.qz-panel').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        btn.setAttribute('aria-selected', 'true');
        const target = document.getElementById('qz-' + btn.dataset.qztab);
        if (target) target.classList.add('active');
      });
    });
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // QUIZ
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const QUIZ_DATA = [
    {
      q: "What year were the Battles of Saratoga fought?",
      options: ["1775", "1776", "1777", "1778"],
      correct: 2,
      feedback: "The Battles of Saratoga took place in the fall of 1777, on September 19 and October 7."
    },
    {
      q: "Which country decided to help America after the Battle of Saratoga?",
      options: ["Spain", "France", "Germany", "Netherlands"],
      correct: 1,
      feedback: "France signed the Treaty of Alliance with America on February 6, 1778 â€” directly because of the American victory at Saratoga!"
    },
    {
      q: "Who was the British general who surrendered at Saratoga?",
      options: ["General Howe", "General Clinton", "General Cornwallis", "General Burgoyne"],
      correct: 3,
      feedback: "General John Burgoyne surrendered his army of about 6,000 troops on October 17, 1777."
    },
    {
      q: "What was the British plan at Saratoga trying to do?",
      options: ["Capture Philadelphia", "Isolate New England", "Burn Boston", "Take Washington prisoner"],
      correct: 1,
      feedback: "The British wanted to control the Hudson River Valley and cut New England off from the rest of the colonies."
    },
    {
      q: "Who designed the American fortifications on Bemis Heights?",
      options: ["Benedict Arnold", "Daniel Morgan", "Tadeusz KoÅ›ciuszko", "George Washington"],
      correct: 2,
      feedback: "Tadeusz KoÅ›ciuszko, a Polish military engineer, designed the brilliant fortifications that gave Americans a huge defensive advantage."
    },
    {
      q: "What happened to Benedict Arnold during the Battle of Bemis Heights?",
      options: ["He was captured", "He ran away", "He was shot in the leg", "He surrendered"],
      correct: 2,
      feedback: "Arnold bravely charged the battlefield even without official command, and was shot in the left leg during his heroic assault."
    },
    {
      q: "About how many British soldiers surrendered at Saratoga?",
      options: ["1,000", "3,000", "6,000", "10,000"],
      correct: 2,
      feedback: "Burgoyne surrendered about 6,000 remaining troops under the Convention of Saratoga on October 17, 1777."
    },
    {
      q: "Daniel Morgan's riflemen were especially famous for what skill?",
      options: ["Sword fighting", "Sharpshooting", "Horseback riding", "Building forts"],
      correct: 1,
      feedback: "Morgan's Virginia riflemen were expert sharpshooters who could hit targets from very long distances â€” they specifically targeted British officers!"
    },
    {
      q: "The Battles of Saratoga are often called the _____ of the American Revolution.",
      options: ["Last stand", "Opening shot", "Turning point", "Final chapter"],
      correct: 2,
      feedback: "Saratoga is called the 'turning point' because it convinced France to join the American side, which changed everything about the war."
    },
    {
      q: "The French alliance after Saratoga eventually helped Americans win at which final battle?",
      options: ["Bunker Hill", "Yorktown", "Lexington", "Trenton"],
      correct: 1,
      feedback: "French support â€” especially the French navy â€” was crucial to the final American victory at Yorktown in 1781, which ended the Revolution."
    }
  ];

  function initQuiz() {
    quizQuestions = [...QUIZ_DATA];
    currentQuestionIndex = 0;
    quizScore = 0;
    quizAnswered = false;
    selectedOptionIndex = null;

    document.getElementById('quiz-active-card').style.display = 'block';
    document.getElementById('quiz-end-screen').classList.remove('visible');
    document.getElementById('quiz-score-val').textContent = '0';
    updateProgressBar(0);
    renderQuestion();
  }

  function renderQuestion() {
    const q = quizQuestions[currentQuestionIndex];
    quizAnswered = false;
    selectedOptionIndex = null;

    document.getElementById('quiz-q-num').textContent = `Question ${currentQuestionIndex + 1} of 10`;
    document.getElementById('quiz-progress-text').textContent = `Question ${currentQuestionIndex + 1} of 10`;
    document.getElementById('quiz-question-text').textContent = q.q;

    const feedback = document.getElementById('quiz-feedback');
    feedback.className = 'quiz-feedback';
    feedback.textContent = '';

    const optList = document.getElementById('quiz-options-list');
    optList.innerHTML = '';
    const letters = ['A', 'B', 'C', 'D'];
    q.options.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.className = 'quiz-option';
      btn.setAttribute('role', 'radio');
      btn.setAttribute('aria-checked', 'false');
      btn.setAttribute('data-index', i);
      btn.innerHTML = `<span class="quiz-option-letter" aria-hidden="true">${letters[i]}</span><span>${opt}</span>`;
      btn.addEventListener('click', () => selectOption(i));
      optList.appendChild(btn);
    });

    const submitBtn = document.getElementById('quiz-submit-btn');
    submitBtn.disabled = true;
    submitBtn.style.display = '';

    const nextBtn = document.getElementById('quiz-next-btn');
    nextBtn.classList.add('hidden');
  }

  function selectOption(index) {
    if (quizAnswered) return;
    selectedOptionIndex = index;
    document.querySelectorAll('.quiz-option').forEach((btn, i) => {
      btn.classList.toggle('selected', i === index);
      btn.setAttribute('aria-checked', i === index ? 'true' : 'false');
    });
    document.getElementById('quiz-submit-btn').disabled = false;
  }

  function submitAnswer() {
    if (quizAnswered || selectedOptionIndex === null) return;
    quizAnswered = true;

    const q = quizQuestions[currentQuestionIndex];
    const isCorrect = selectedOptionIndex === q.correct;
    const feedback = document.getElementById('quiz-feedback');
    const options = document.querySelectorAll('.quiz-option');

    // Lock all options
    options.forEach(opt => opt.classList.add('locked'));

    // Mark correct and wrong
    options.forEach((opt, i) => {
      if (i === q.correct) {
        opt.classList.add('correct');
        opt.classList.remove('selected');
      } else if (i === selectedOptionIndex && !isCorrect) {
        opt.classList.add('wrong');
        opt.classList.remove('selected');
      }
    });

    if (isCorrect) {
      quizScore++;
      document.getElementById('quiz-score-val').textContent = quizScore;
      feedback.className = 'quiz-feedback correct';
      feedback.textContent = `âœ… Correct! ${q.feedback}`;
      fireConfetti();
    } else {
      feedback.className = 'quiz-feedback wrong';
      feedback.textContent = `Not quite! ${q.feedback}`;
    }

    document.getElementById('quiz-submit-btn').disabled = true;
    document.getElementById('quiz-submit-btn').style.display = 'none';

    const nextBtn = document.getElementById('quiz-next-btn');
    if (currentQuestionIndex < quizQuestions.length - 1) {
      nextBtn.textContent = 'Next Question â†’';
      nextBtn.classList.remove('hidden');
      nextBtn.onclick = nextQuestion;
    } else {
      nextBtn.textContent = 'See My Results â†’';
      nextBtn.classList.remove('hidden');
      nextBtn.onclick = showResults;
    }

    updateProgressBar(currentQuestionIndex + 1);
  }

  function nextQuestion() {
    currentQuestionIndex++;
    renderQuestion();
  }

  function updateProgressBar(answered) {
    const pct = (answered / 10) * 100;
    const bar = document.getElementById('quiz-progress-bar');
    bar.style.width = pct + '%';
    bar.parentElement.setAttribute('aria-valuenow', answered);
  }

  function showResults() {
    document.getElementById('quiz-active-card').style.display = 'none';
    const endScreen = document.getElementById('quiz-end-screen');
    endScreen.classList.add('visible');

    document.getElementById('quiz-end-score').textContent = `${quizScore} / 10`;

    let badge, title, subtitle;
    if (quizScore === 10) {
      badge = 'ğŸ…'; title = 'Saratoga Scholar!'; subtitle = 'A perfect score! You know this history inside and out. Well done!';
    } else if (quizScore >= 7) {
      badge = 'ğŸ–ï¸'; title = 'History Hero!'; subtitle = 'Excellent work! You really know your Revolutionary War history!';
    } else if (quizScore >= 4) {
      badge = 'ğŸ“š'; title = 'Rising Patriot!'; subtitle = 'Good effort! Review the story and people sections, then try again!';
    } else {
      badge = 'ğŸŒ±'; title = 'History Explorer!'; subtitle = 'Keep exploring! Read through the Story and People sections, then retake the quiz!';
    }
    document.getElementById('quiz-end-badge').textContent = badge;
    document.getElementById('quiz-end-title').textContent = title;
    document.getElementById('quiz-end-subtitle').textContent = subtitle;

    if (quizScore === 10) fireConfetti(true);
  }

  function setupQuiz() {
    document.getElementById('quiz-submit-btn').addEventListener('click', submitAnswer);
    document.getElementById('quiz-retake-btn').addEventListener('click', initQuiz);
    initQuiz();
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // CONFETTI
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function fireConfetti(big = false) {
    const container = document.getElementById('confetti-container');
    const colors = ['#1D4ED8','#DC2626','#F59E0B','#16A34A','#8B5CF6','#EC4899'];
    const count = big ? 60 : 20;
    for (let i = 0; i < count; i++) {
      const piece = document.createElement('div');
      piece.className = 'confetti-piece';
      piece.style.cssText = `
        left: ${Math.random() * 100}%;
        background: ${colors[Math.floor(Math.random() * colors.length)]};
        width: ${6 + Math.random() * 8}px;
        height: ${6 + Math.random() * 8}px;
        border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};
        animation-duration: ${1.5 + Math.random() * 2}s;
        animation-delay: ${Math.random() * 0.4}s;
      `;
      container.appendChild(piece);
      piece.addEventListener('animationend', () => piece.remove());
    }
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // DRAG AND DROP TIMELINE
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const DND_EVENTS = [
    { id: 'ticonderoga', label: 'ğŸ° Fort Ticonderoga', date: 'July 1, 1777' },
    { id: 'bennington',  label: 'ğŸŒ¿ Battle of Bennington', date: 'August 16, 1777' },
    { id: 'freeman',     label: "âš”ï¸ Freeman's Farm", date: 'September 19, 1777' },
    { id: 'stalemate',   label: 'â³ The Stalemate', date: 'Sept 20 â€“ Oct 6, 1777' },
    { id: 'bemis',       label: 'ğŸ”¥ Bemis Heights', date: 'October 7, 1777' },
    { id: 'surrender',   label: 'ğŸ³ï¸ The Surrender', date: 'October 17, 1777' }
  ];

  // Slot contents: array of event IDs (null = empty)
  let dndSlots = [null, null, null, null, null, null];
  let dndSourceItems = []; // IDs of items still in source

  function initDnd() {
    // Shuffle the order for display in source panel
    const shuffled = [...DND_EVENTS].sort(() => Math.random() - 0.5);
    dndSourceItems = shuffled.map(e => e.id);
    dndSlots = [null, null, null, null, null, null];
    renderDnd();
  }

  function renderDnd() {
    const source = document.getElementById('dnd-source');
    const target = document.getElementById('dnd-target');
    const result = document.getElementById('dnd-result');
    result.className = 'dnd-result';

    // Render source items
    source.innerHTML = '';
    dndSourceItems.forEach(id => {
      const ev = DND_EVENTS.find(e => e.id === id);
      const item = document.createElement('div');
      item.className = 'dnd-item';
      item.setAttribute('draggable', 'true');
      item.setAttribute('data-id', id);
      item.setAttribute('role', 'listitem');
      item.setAttribute('tabindex', '0');
      item.setAttribute('aria-label', `${ev.label} â€” drag to place in order`);
      item.innerHTML = `<span style="font-size:1.1rem">â ¿</span>${ev.label}<span style="font-size:0.75rem;color:var(--slate);margin-left:auto">${ev.date}</span>`;
      attachDragListeners(item, true);
      attachTouchListeners(item);
      source.appendChild(item);
    });

    // Render slots
    target.innerHTML = '';
    for (let i = 0; i < 6; i++) {
      const slot = document.createElement('div');
      slot.className = 'dnd-slot';
      slot.setAttribute('data-slot', i);
      slot.setAttribute('role', 'listitem');
      slot.setAttribute('aria-label', `Slot ${i + 1}`);
      const numBadge = document.createElement('span');
      numBadge.className = 'dnd-slot-number';
      numBadge.textContent = i + 1;
      slot.appendChild(numBadge);

      if (dndSlots[i] !== null) {
        const ev = DND_EVENTS.find(e => e.id === dndSlots[i]);
        slot.classList.add('filled');
        const label = document.createTextNode(ev.label);
        slot.appendChild(label);
        slot.setAttribute('aria-label', `Slot ${i + 1}: ${ev.label}`);
        // Allow removing from slot (click to return to source)
        slot.style.cursor = 'pointer';
        slot.title = 'Click to remove';
        slot.addEventListener('click', () => removeFromSlot(i));
      } else {
        const placeholder = document.createTextNode(`Drop event here`);
        slot.appendChild(placeholder);
        attachDropListeners(slot, i);
      }
      target.appendChild(slot);
    }
  }

  function removeFromSlot(slotIndex) {
    const id = dndSlots[slotIndex];
    if (!id) return;
    dndSourceItems.push(id);
    dndSlots[slotIndex] = null;
    renderDnd();
  }

  function attachDragListeners(item, fromSource) {
    item.addEventListener('dragstart', (e) => {
      draggedItem = item.dataset.id;
      draggedFromSource = fromSource;
      item.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/plain', item.dataset.id);
    });
    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
    });
  }

  function attachDropListeners(slot, slotIndex) {
    slot.addEventListener('dragover', (e) => {
      e.preventDefault();
      slot.classList.add('drag-over');
    });
    slot.addEventListener('dragleave', () => {
      slot.classList.remove('drag-over');
    });
    slot.addEventListener('drop', (e) => {
      e.preventDefault();
      slot.classList.remove('drag-over');
      const id = e.dataTransfer.getData('text/plain') || draggedItem;
      if (!id) return;
      placeInSlot(id, slotIndex);
    });
  }

  function placeInSlot(id, slotIndex) {
    if (dndSlots[slotIndex] !== null) {
      // Swap: return existing to source
      dndSourceItems.push(dndSlots[slotIndex]);
    }
    dndSlots[slotIndex] = id;
    // Remove from source
    const idx = dndSourceItems.indexOf(id);
    if (idx > -1) dndSourceItems.splice(idx, 1);
    // Also check if dragged from another slot
    for (let i = 0; i < 6; i++) {
      if (i !== slotIndex && dndSlots[i] === id) {
        dndSlots[i] = null;
      }
    }
    renderDnd();
  }

  function checkDndOrder() {
    const correctOrder = DND_EVENTS.map(e => e.id);
    const result = document.getElementById('dnd-result');
    const allFilled = dndSlots.every(s => s !== null);
    if (!allFilled) {
      result.className = 'dnd-result show error';
      result.innerHTML = 'âš ï¸ Please fill all 6 slots before checking!';
      return;
    }
    const isCorrect = dndSlots.every((id, i) => id === correctOrder[i]);
    if (isCorrect) {
      result.className = 'dnd-result show success';
      result.innerHTML = 'ğŸ‰ <strong>Perfect!</strong> You got all 6 events in the correct chronological order! You really know the Road to Saratoga!';
      // Mark all slots green with snap
      document.querySelectorAll('.dnd-slot').forEach(sl => {
        sl.style.animation = 'snapIn 0.4s ease';
      });
      fireConfetti(true);
    } else {
      result.className = 'dnd-result show error';
      // Find wrong ones
      const wrongCount = dndSlots.filter((id, i) => id !== correctOrder[i]).length;
      result.innerHTML = `âŒ <strong>${wrongCount} event(s) are in the wrong position.</strong> Keep trying! Hint: Start with Fort Ticonderoga in slot 1 and The Surrender in slot 6.`;
      // Shake wrong slots
      document.querySelectorAll('.dnd-slot.filled').forEach((sl, idx) => {
        const slotNum = parseInt(sl.dataset.slot);
        if (dndSlots[slotNum] !== correctOrder[slotNum]) {
          sl.classList.add('filled-wrong');
          sl.style.animation = 'shake 0.4s ease';
          setTimeout(() => {
            sl.style.animation = '';
            sl.classList.remove('filled-wrong');
          }, 500);
        }
      });
    }
  }

  // â”€â”€â”€ TOUCH DRAG AND DROP â”€â”€â”€
  function attachTouchListeners(item) {
    item.addEventListener('touchstart', onTouchStart, { passive: false });
  }

  function onTouchStart(e) {
    if (e.touches.length !== 1) return;
    const item = e.currentTarget;
    const touch = e.touches[0];
    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
    touchDragging = false;
    draggedItem = item.dataset.id;
    draggedFromSource = true;

    // Create a floating clone for visual feedback
    let cloneTimer = setTimeout(() => {
      touchDragging = true;
      touchClone = item.cloneNode(true);
      touchClone.style.cssText = `
        position: fixed;
        width: ${item.offsetWidth}px;
        opacity: 0.85;
        pointer-events: none;
        z-index: 9999;
        left: ${touch.clientX - item.offsetWidth / 2}px;
        top: ${touch.clientY - 20}px;
        border: 2px solid var(--blue);
        border-radius: 8px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.25);
        background: white;
        transition: none;
      `;
      document.body.appendChild(touchClone);
      item.classList.add('dragging');
    }, 150);

    const onTouchMove = (e) => {
      e.preventDefault();
      if (!touchDragging) return;
      const touch = e.touches[0];
      if (touchClone) {
        touchClone.style.left = `${touch.clientX - (touchClone.offsetWidth / 2)}px`;
        touchClone.style.top = `${touch.clientY - 20}px`;
      }
      // Highlight drop target
      const el = document.elementFromPoint(touch.clientX, touch.clientY);
      document.querySelectorAll('.dnd-slot').forEach(s => s.classList.remove('drag-over'));
      if (el) {
        const slot = el.closest('.dnd-slot');
        if (slot && !slot.classList.contains('filled')) {
          slot.classList.add('drag-over');
          currentTouchTarget = slot;
        } else {
          currentTouchTarget = null;
        }
      }
    };

    const onTouchEnd = (e) => {
      clearTimeout(cloneTimer);
      item.classList.remove('dragging');
      if (touchClone) { touchClone.remove(); touchClone = null; }
      document.querySelectorAll('.dnd-slot').forEach(s => s.classList.remove('drag-over'));

      if (touchDragging && currentTouchTarget) {
        const slotIndex = parseInt(currentTouchTarget.dataset.slot);
        if (!isNaN(slotIndex)) {
          placeInSlot(draggedItem, slotIndex);
        }
      }
      touchDragging = false;
      currentTouchTarget = null;
      document.removeEventListener('touchmove', onTouchMove);
      document.removeEventListener('touchend', onTouchEnd);
    };

    document.addEventListener('touchmove', onTouchMove, { passive: false });
    document.addEventListener('touchend', onTouchEnd);
  }

  function setupDnd() {
    initDnd();
    document.getElementById('dnd-check-btn').addEventListener('click', checkDndOrder);
    document.getElementById('dnd-reset-btn').addEventListener('click', initDnd);
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // FLASHCARDS
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const FLASHCARD_DATA = [
    {
      front: "What did Burgoyne wear to surrender?",
      back: "His fanciest scarlet uniform with gold braid â€” the same outfit he planned to wear marching into Albany as a winner!",
      icon: "ğŸ©"
    },
    {
      front: "How did Americans slow down Burgoyne's march?",
      back: "They chopped down trees and destroyed bridges â€” a short trip took him an entire month!",
      icon: "ğŸŒ²"
    },
    {
      front: "Who was the 'Hero of Saratoga' who later betrayed America?",
      back: "Benedict Arnold! He fought bravely at Saratoga but later switched to the British side.",
      icon: "âš¡"
    },
    {
      front: "Where was KoÅ›ciuszko from?",
      back: "Poland! He was a brilliant engineer who designed the fort that helped America win.",
      icon: "ğŸ—ºï¸"
    },
    {
      front: "How many armies were supposed to meet in Albany?",
      back: "Three! But only Burgoyne's army showed up. Howe sailed to Philadelphia and St. Leger was turned back at Fort Stanwix.",
      icon: "ğŸ”¢"
    },
    {
      front: "What did soldiers eat during the stalemate?",
      back: "Not much! British soldiers were put on half rations â€” that means they only got half the food they normally ate.",
      icon: "ğŸ"
    },
    {
      front: "Who shot General Fraser?",
      back: "One of Daniel Morgan's Virginia riflemen! They were such good shots they could hit a target from very far away.",
      icon: "ğŸ¯"
    },
    {
      front: "How many Americans surrounded Burgoyne at the end?",
      back: "About 20,000! That's nearly four times as many soldiers as Burgoyne had left.",
      icon: "ğŸ‘¥"
    }
  ];

  function setupFlashcards() {
    const grid = document.getElementById('flashcard-grid');
    grid.innerHTML = '';
    FLASHCARD_DATA.forEach((card, i) => {
      const wrap = document.createElement('div');
      wrap.className = 'flashcard-wrap';
      wrap.setAttribute('tabindex', '0');
      wrap.setAttribute('role', 'button');
      wrap.setAttribute('aria-label', `Flashcard ${i+1}: ${card.front}. Click to reveal answer.`);
      wrap.innerHTML = `
        <div class="flashcard-inner">
          <div class="flashcard-front">
            <div class="card-icon" aria-hidden="true">${card.icon}</div>
            <div class="card-q">${card.front}</div>
            <div class="card-hint">Tap to reveal!</div>
          </div>
          <div class="flashcard-back">
            <div class="card-a">${card.back}</div>
          </div>
        </div>
      `;
      const toggle = () => {
        const flipped = wrap.classList.toggle('flipped');
        wrap.setAttribute('aria-label', flipped
          ? `Flashcard ${i+1}: Answer: ${card.back}. Click to flip back.`
          : `Flashcard ${i+1}: ${card.front}. Click to reveal answer.`
        );
      };
      wrap.addEventListener('click', toggle);
      wrap.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); }
      });
      grid.appendChild(wrap);
    });
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // INITIALIZE EVERYTHING
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function init() {
    setupNav();
    setupScrollAnimations();
    setupAccordions();
    setupBattleTabs();
    setupQuizZoneTabs();
    setupQuiz();
    setupDnd();
    setupFlashcards();

    // Initial scroll animation check (for home section)
    setTimeout(checkScrollAnimations, 300);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

})();
</script>
</body>
</html>
